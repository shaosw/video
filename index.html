<!DOCTYPE html>
<html>
<head>
    <title>命令生成器</title>
    <style>
        #command-buttons {
            display: flex;
            justify-content: space-between;
        }

        .button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .button:hover {
            background-color: #45a049;
        }
    </style>
    <script>
        function generateCommand() {
            var startHour = document.getElementById("start-hour").value;
            var startMinute = document.getElementById("start-minute").value;
            var startSecond = document.getElementById("start-second").value;
            var endHour = document.getElementById("end-hour").value;
            var endMinute = document.getElementById("end-minute").value;
            var endSecond = document.getElementById("end-second").value;
            var url = document.getElementById("url").value;

            var command = `/usr/local/sbin/yt-dlp --proxy 127.0.0.1:33211 --external-downloader ffmpeg --external-downloader-args ffmpeg:"-ss ${startHour}:${startMinute}:${startSecond} -to ${endHour}:${endMinute}:${endSecond}" -f "bestvideo[height<=720]+bestaudio/best[height<=720]" -o "%(uploader)s_%(start_time)s_%(end_time)s.mp4" ${url}`;

            var commandOutput = document.getElementById("command-output");
            commandOutput.value = command;
        }

        function copyCommand() {
            var commandOutput = document.getElementById("command-output");
            commandOutput.select();
            document.execCommand("copy");
            alert("命令已复制到剪贴板！");
        }

        function openCmd() {
            var commandOutput = document.getElementById("command-output").value;
            var cmdCommand = "cmd /c start cmd.exe /K \"" + commandOutput + "\"";
            window.open(cmdCommand, "_blank");
        }

        function handleKeyPress(event) {
            if (event.keyCode === 13) {
                event.preventDefault();
                generateCommand();
            }
        }
    </script>
</head>
<body>
    <h1>命令生成器</h1>
    <label for="start-hour">开始时间（时:分:秒）：</label>
    <input type="text" id="start-hour" placeholder="时"> :
    <input type="text" id="start-minute" placeholder="分"> :
    <input type="text" id="start-second" placeholder="秒"><br><br>

    <label for="end-hour">结束时间（时:分:秒）：</label>
    <input type="text" id="end-hour" placeholder="时"> :
    <input type="text" id="end-minute" placeholder="分"> :
    <input type="text" id="end-second" placeholder="秒"><br><br>

    <label for="url">URL：</label>
    <input type="text" id="url" placeholder="URL" style="width: 100%;" maxlength="1000" onkeypress="handleKeyPress(event)"><br><br>

    <button onclick="generateCommand()" class="button">生成命令</button>

    <div id="command-buttons">
        <button onclick="copyCommand()" class="button">复制命令</button>
        <button onclick="openCmd()" class="button">执行命令</button>
    </div>

    <textarea id="command-output" rows="5" cols="60" readonly></textarea>

</body>
</html>
